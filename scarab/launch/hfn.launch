<launch>

  <arg name="agent" default="$(env AGENT)" />
  <arg name="use_vicon"     default="true" />
  <arg name="id"        default="0"/>

<!--  <arg name="odom_topic"    default="odom_vicon" if="$(arg use_vicon)"/>-->
  <arg name="odom_topic"    default="/vicon/$(arg agent)/odom" if="$(arg use_vicon)"/>
  <arg name="odom_topic"    default="odom_laser" unless="$(arg use_vicon)"/>
  <arg name="map_topic"     default="map"        if="$(arg use_vicon)"/>
  <arg name="map_topic"     default="map_hokuyo" unless="$(arg use_vicon)"/>
  <arg name="cmd_vel_topic" default="cmd_vel"/>
  <arg name="scan_topic"    default="scan"/>
  <arg name="pose_topic"    default="pose"/>

  <arg name="map_frame"     default="$(arg agent)/map" />
  <arg name="base_frame"    default="$(arg agent)/base_link" />

  <arg name="param_file"    default="$(find scarab)/config/hfn.yaml" />

  <node name="hfn" pkg="hfn" type="hfn" output="screen">
    <param name="base_frame_id"       value="$(arg base_frame)" />
    <param name="map_frame_id"        value="$(arg map_frame)" />

    <rosparam command="load" file="$(arg param_file)" />

    <remap from="odom" to="$(arg odom_topic)" />
    <remap from="map" to="$(arg map_topic)" />
    <remap from="scan" to="$(arg scan_topic)" />
    <remap from="pose" to="$(arg pose_topic)" />
    <remap from="cmd_vel" to="$(arg cmd_vel_topic)" />
    <param name="traj_mode"          value="1"/> <!--default 0 is original , 1 is constant acc, 2 is min jerk-->
    <param name="max_speed"          value="0.22"/> <!--default 0.5m/s-->
    <param name="max_acc"            value="0.3"/> <!--default 0.5m/s^2-->
    <param name="agent"              value="$(arg agent)"/>


    <!-- previous method, include the agent_r is not working is since the params are not pass!!! -->
    <param name="goal_tolerance_ang" value="0.05"/> <!--default 2pi-->
    <param name="goal_tolerance"     value="0.05"/> <!--default .2m-->
    <param name="agent_r"            value="0.2"/>
    <param name="robot_id"            value="$(arg id)"/>
    <param name="d_yaw"              value="0.1"/>
  </node>

</launch>
